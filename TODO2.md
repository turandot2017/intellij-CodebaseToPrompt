# TODO 列表

---

## 1. 规划与设计

- [x] **设计数据存储方案**
  - 选择使用本地 JSON 文件存储，便于读写和维护
  - 数据结构设计如下：
    ```typescript
    interface FileSelection {
      id: string;           // 唯一标识符
      name: string;         // 选择记录名称
      description: string;  // 选择记录描述
      filePaths: string[]; // 文件路径列表
      createdAt: number;   // 创建时间戳
      updatedAt: number;   // 更新时间戳
    }
    ```
  - 存储位置：插件配置目录下的 `fileSelections.json`
  
- [x] **界面布局设计**
  - 在插件主工具栏添加：
    1. "保存选择" 按钮（带图标）
    2. "历史选择" 下拉菜单按钮（带图标）
  - "保存选择"对话框设计：
    1. 标题：保存当前选择
    2. 输入字段：
       - 名称（必填）：文本输入框
       - 描述（选填）：多行文本框
    3. 按钮：确认/取消
  - "历史选择"列表界面设计：
    1. 搜索框：支持按名称和描述搜索
    2. 记录列表：
       - 显示字段：名称、描述、创建时间
       - 每条记录的操作按钮：应用、删除
    3. 排序选项：按名称/时间

## 2. 实现保存当前选择功能

- [ ] **添加"保存选择"按钮**
  - 在工具位置添加按钮或菜单项。
  - 联动 FileTreePanel.java 中的文件选择变化, 当选择的文件列表不为空时可用, 否则禁用该按钮。
- [ ] **开发"保存选择"对话框**
  - 实现名称和描述的输入字段，添加必要的验证（如名称必填）。
  - 使用 DialogWrapper 创建标准对话框。
  - 添加输入验证，确保名称不为空。
  - 提供描述的可选输入。
- [ ] **实现保存逻辑**
  - 获取当前文件树的选择状态，生成文件路径列表。
  - 将输入的名称、描述和文件列表保存到本地存储。
  - 添加保存成功的提示信息。

## 3. 实现提取历史选择功能

- [ ] **添加"历史选择"按钮**
  - 在主界面添加按钮或下拉菜单入口。
- [ ] **开发"历史选择"列表界面**
  - 显示保存的记录，包括名称、描述、保存时间等。
  - 支持记录的选择和应用。
- [ ] **实现提取逻辑**
  - 点击记录后，读取对应的文件路径列表。
  - 更新文件树的选择状态，高亮或选中相应的文件和目录。
  - 处理文件不存在的情况，给予提示。

## 4. 实现删除已有的选择功能

- [ ] **在记录列表中添加"删除"操作**
  - 为每条记录添加"删除"按钮或选项。
- [ ] **实现删除确认对话框**
  - 弹出确认窗口，防止用户误删。
- [ ] **实现删除逻辑**
  - 从本地存储中移除对应的记录数据。
  - 更新列表界面，实时反映删除结果。

## 5. 数据持久化处理

- [ ] **实现数据读写功能**
  - 编写读取和写入本地存储的模块。
- [ ] **确保数据安全性**
  - 处理异常情况，防止数据损坏或丢失。
  - 考虑数据备份或恢复机制（可选）。

## 6. 界面优化与用户体验

- [ ] **完善提示信息**
  - 对各种操作提供明确的提示，如成功、失败、异常等。
- [ ] **美化界面**
  - 统一界面风格，提升美观度。
- [ ] **增加便捷操作**
  - 考虑添加快捷键支持。

## 7. 测试

- [ ] **单元测试**
  - 为核心功能编写测试用例，确保逻辑正确。
- [ ] **集成测试**
  - 测试保存、提取、删除功能的完整流程。
- [ ] **用户体验测试**
  - 收集用户反馈，优化操作流程和界面。

## 8. 文档更新

- [ ] **更新 README.md**
  - 添加新功能的介绍和使用指南。
- [ ] **编写使用手册**
  - 详细说明各个新功能的操作方法。
- [ ] **更新版本日志**
  - 在变更日志中记录新增功能和改进。

## 9. 发布准备

- [ ] **代码审核**
  - 进行代码审查，确保质量和规范性。
- [ ] **打包与发布**
  - 编译新版本插件，更新版本号。
  - 发布插件更新，通知用户。