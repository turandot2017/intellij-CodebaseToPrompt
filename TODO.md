# codes2prompt 插件开发 TODO 列表

## 1. 项目初始化
- [x] 创建 IntelliJ IDEA 插件项目
  - 使用 IntelliJ Platform Plugin Template 创建项目
  - 配置 Gradle 构建系统
  - 设置项目 JDK 为 11 或更高版本
  - 设置项目编码为 UTF-8
- [x] 配置项目基本信息（plugin.xml）
  - 设置插件名称: codes2prompt
  - 设置插件版本: 1.0.0
  - 设置插件描述: 一个帮助开发人员快速生成代码相关 Prompt 的插件
  - 设置兼容的 IDE 版本范围: 2021.1+
  - 设置插件类别: Development Tools
  - 设置作者信息
- [x] 设置项目依赖
  - 添加 IntelliJ Platform SDK
  - 添加必要的 IntelliJ Platform 依赖项
  - 添加 Kotlin 标准库依赖(如果使用 Kotlin)
  - 添加其他必要的第三方库依赖
- [x] 创建基本的项目结构
  - 创建 src/main/java 目录
  - 创建 src/main/resources 目录
  - 创建基础包结构:
    - com.github.codes2prompt
    - com.github.codes2prompt.action
    - com.github.codes2prompt.ui
    - com.github.codes2prompt.util
  - 创建资源文件目录:
    - META-INF
    - icons
    - messages

## 2. UI 组件开发
### 2.1 主界面按钮
- [ ] 在 "Find in Files" 界面添加 "codes2prompt" 按钮
- [ ] 在 "Search Everywhere" 界面添加 "codes2prompt" 按钮
- [ ] 设计并添加按钮图标

### 2.2 弹出窗口
- [ ] 创建主窗口布局
- [ ] 实现上方按钮区域
  - [ ] 帮助按钮
  - [ ] 展开按钮
  - [ ] 折叠按钮
  - [ ] 全选按钮
  - [ ] 全不选按钮
  - [ ] 复制按钮
- [ ] 实现左侧目录树区域
  - [ ] 显示文件目录结构
  - [ ] 添加文件选择框
  - [ ] 实现目录展开/折叠功能
- [ ] 实现右侧 Prompt 内容区域
  - [ ] 创建文本显示区域
  - [ ] 添加滚动条支持
- [ ] 实现底部状态栏
  - [ ] 显示选中文件数量
  - [ ] 显示 Tokens 估算数量

## 3. 核心功能实现
### 3.1 文件处理
- [ ] 获取搜索结果中的文件列表
- [ ] 读取文件内容
- [ ] 构建文件目录结构

### 3.2 Prompt 生成
- [ ] 实现文件夹结构生成逻辑
- [ ] 实现文档内容生成逻辑
- [ ] 实现实时更新机制

### 3.3 Tokens 计算
- [ ] 研究并选择合适的分词算法
- [ ] 实现 Tokens 数量估算功能
- [ ] 实现实时计算更新

### 3.4 剪贴板操作
- [ ] 实现复制到剪贴板功能
- [ ] 添加复制成功提示

## 4. 用户交互功能
- [ ] 实现文件选择响应
- [ ] 实现全选/全不选功能
- [ ] 实现目录展开/折叠功能
- [ ] 实现帮助文档显示
- [ ] 添加操作提示和错误提示

## 5. 性能优化
- [ ] 优化大文件处理
- [ ] 优化目录树渲染
- [ ] 优化 Prompt 生成性能
- [ ] 优化 Tokens 计算性能

## 6. 测试
- [ ] 单元测试
  - [ ] 文件处理测试
  - [ ] Prompt 生成测试
  - [ ] Tokens 计算测试
- [ ] 集成测试
  - [ ] UI 组件测试
  - [ ] 功能集成测试
- [ ] 性能测试
- [ ] 跨平台测试（Windows/macOS/Linux）

## 7. 文档编写
- [ ] 编写安装指南
- [ ] 编写用户使用手册
- [ ] 编写开发文档
- [ ] 编写注释和代码文档

## 8. 打包和部署
- [ ] 配置构建脚本
- [ ] 生成插件包
- [ ] 测试安装流程
- [ ] 准备发布材料

## 9. 优化和改进
- [ ] 收集用户反馈
- [ ] 修复发现的问题
- [ ] 优化用户体验
- [ ] 考虑新功能需求

## 注意事项
- 所有 UI 文本使用中文
- 确保跨平台兼容性
- 保持代码结构清晰，便于维护
- 注意异常处理和错误提示
- 考虑未来可能的国际化需求 