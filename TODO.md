# codes2prompt 插件开发 TODO 列表

## 1. 项目初始化 ✓
- [x] 创建 IntelliJ IDEA 插件项目
  - 使用 IntelliJ Platform Plugin Template 创建项目
  - 配置 Gradle 构建系统
  - 设置项目 JDK 为 11 或更高版本
  - 设置项目编码为 UTF-8
- [x] 配置项目基本信息（plugin.xml）
  - 设置插件名称: codes2prompt
  - 设置插件版本: 1.0.0
  - 设置插件描述: 一个帮助开发人员快速生成代码相关 Prompt 的插件
  - 设置兼容的 IDE 版本范围: 2021.1+
  - 设置插件类别: Development Tools
  - 设置作者信息
- [x] 设置项目依赖
  - 添加 IntelliJ Platform SDK
  - 添加必要的 IntelliJ Platform 依赖项
  - 添加其他必要的第三方库依赖
- [x] 创建基本的项目结构
  - 创建 src/main/java 目录
  - 创建 src/main/resources 目录
  - 创建基础包结构和资源文件目录

## 2. UI 组件开发
### 2.1 主界面按钮 ✓
- [x] 在 "Find in Files" 界面添加 "codes2prompt" 按钮
- [x] 实现基本的文件列表获取功能

### 2.2 弹出窗口
- [x] 创建主窗口类 (PromptGeneratorDialog)
  - [x] 实现基本的对话框布局
  - [x] 设置窗口标题和大小
  - [x] 添加关闭按钮和事件处理

- [x] 实现上方工具栏
  - [x] 创建工具栏面板
  - [x] 添加并实现帮助按钮
    - [x] 创建帮助对话框
    - [x] 编写帮助内容
  - [x] 添加并实现展开/折叠按钮
  - [x] 添加并实现全选/全不选按钮
  - [x] 添加并实现复制按钮
    - [x] 实现剪贴板操作
    - [x] 添加复制成功提示

- [x] 实现左侧文件树
  - [x] 创建自定义的树形组件
  - [x] 实现文件选择框功能
  - [x] 实现目录展开/折叠功能
  - [x] 添加文件图标支持
  - [x] 实现选择状态变化监听

- [ ] 实现右侧 Prompt 预览
  - [ ] 创建文本显示区域
  - [ ] 添加滚动条支持
  - [ ] 实现实时更新机制

- [ ] 实现底部状态栏
  - [ ] 创建状态栏组件
  - [ ] 实现文件计数显示
  - [ ] 实现 Tokens 计数显示

## 3. 核心功能实现
### 3.1 文件处理
- [ ] 创建 FileProcessor 类
  - [ ] 实现文件内容读取
  - [ ] 实现文件路径处理
  - [ ] 添加异常处理机制

### 3.2 Prompt 生成
- [ ] 创建 PromptGenerator 类
  - [ ] 实现文件夹结构生成
  - [ ] 实现文档内容生成
  - [ ] 实现格式化功能

### 3.3 Tokens 计算
- [ ] 创建 TokenCounter 类
  - [ ] 研究并实现分词算法
  - [ ] 实现 Tokens 数量估算
  - [ ] 优化计算性能

## 4. 异常处理和错误提示
- [ ] 创建 ErrorHandler 类
  - [ ] 实现文件读取异常处理
  - [ ] 实现 UI 操作异常处理
  - [ ] 添加用户友好的错误提示

## 5. 性能优化
- [ ] 实现大文件处理策略
  - [ ] 添加文件大小检查
  - [ ] 实现分块读取机制
- [ ] 优化 UI 更新机制
  - [ ] 实现延迟更新
  - [ ] 添加更新队列

## 6. 测试
### 6.1 单元测试
- [ ] FileProcessor 测试
- [ ] PromptGenerator 测试
- [ ] TokenCounter 测试

### 6.2 集成测试
- [ ] UI 组件集成测试
- [ ] 功能流程测试
- [ ] 跨平台兼容性测试

## 7. 文档编写
- [ ] 编写用户使用手册
- [ ] 编写开发文档
- [ ] 编写注释和代码文档

## 8. 打包和部署
- [ ] 配置构建脚本
- [ ] 生成插件包
- [ ] 编写安装指南
- [ ] 测试安装流程

## 注意事项
- 所有 UI 文本使用中文
- 确保跨平台兼容性
- 保持代码结构清晰，便于维护
- 注意异常处理和错误提示 